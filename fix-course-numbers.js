const fs = require('fs');
const path = require('path');

// 需要重新编号的文件映射
const renameMap = {
    // 第53课重复文件处理
    '第53课-形式逻辑基础深入-逻辑思维基础.md': '第53课-形式逻辑基础深入-逻辑思维基础.md',
    '第53课-复合条件与逻辑关系-逻辑思维基础.md': '第54课-复合条件与逻辑关系-逻辑思维基础.md',
    
    // 第54课重复文件处理
    '第54课-命题逻辑的深入应用-逻辑思维基础.md': '第55课-命题逻辑的深入应用-逻辑思维基础.md',
    '第54课-条件关系的深入理解-逻辑思维基础.md': '第56课-条件关系的深入理解-逻辑思维基础.md',
    
    // 后续文件需要相应调整（+2）
    '第55课-三段论的有效性与常见错误-逻辑思维基础.md': '第57课-三段论的有效性与常见错误-逻辑思维基础.md',
    '第56课-归纳推理的强度与样本选择-逻辑思维基础.md': '第58课-归纳推理的强度与样本选择-逻辑思维基础.md',
    '第57课-类比论证的评估标准-逻辑思维基础.md': '第59课-类比论证的评估标准-逻辑思维基础.md',
    '第58课-假设与检验-逻辑思维基础.md': '第60课-假设与检验-逻辑思维基础.md',
    '第59课-概率与统计的初步-逻辑思维基础.md': '第61课-概率与统计的初步-逻辑思维基础.md',
    '第60课-逻辑在问题解决中的应用-逻辑思维基础.md': '第62课-逻辑在问题解决中的应用-逻辑思维基础.md',
    '第61课-悖论初步-逻辑思维基础.md': '第63课-悖论初步-逻辑思维基础.md',
    '第62课-简单预测与风险评估-逻辑思维基础.md': '第64课-简单预测与风险评估-逻辑思维基础.md',
    '第63课-系统的层级与嵌套-系统思维基础.md': '第65课-系统的层级与嵌套-系统思维基础.md',
    '第64课-系统中的时间延迟效应-系统思维基础.md': '第66课-系统中的时间延迟效应-系统思维基础.md',
    '第65课-增强回路与调节回路-系统思维基础.md': '第67课-增强回路与调节回路-系统思维基础.md',
    '第66课-系统的限制因素与杠杆点-系统思维基础.md': '第68课-系统的限制因素与杠杆点-系统思维基础.md',
    '第67课-系统的适应性与鲁棒性脆弱性-系统思维基础.md': '第69课-系统的适应性与鲁棒性脆弱性-系统思维基础.md',
    '第68课-非线性与涌现性-系统思维基础.md': '第70课-非线性与涌现性-系统思维基础.md',
    '第69课-系统原型与常见陷阱-系统思维基础.md': '第71课-系统原型与常见陷阱-系统思维基础.md',
    '第70课-系统思考在决策中的应用-系统思维基础.md': '第72课-系统思考在决策中的应用-系统思维基础.md',
    '第71课-设计与干预系统-系统思维基础.md': '第73课-设计与干预系统-系统思维基础.md',
    '第72课-系统世界观与跨学科思维-系统思维基础.md': '第74课-系统世界观与跨学科思维-系统思维基础.md',
    '第73课-深度用户研究与需求洞察-设计思维基础.md': '第75课-深度用户研究与需求洞察-设计思维基础.md',
    '第74课-复杂问题的重新定义与框架-设计思维基础.md': '第76课-复杂问题的重新定义与框架-设计思维基础.md',
    '第75课-结构化创意生成方法-设计思维基础.md': '第77课-结构化创意生成方法-设计思维基础.md',
    '第76课-概念设计与方案整合-设计思维基础.md': '第78课-概念设计与方案整合-设计思维基础.md',
    '第77课-高保真原型制作-设计思维基础.md': '第79课-高保真原型制作-设计思维基础.md',
    '第78课-系统性用户测试-设计思维基础.md': '第80课-系统性用户测试-设计思维基础.md',
    '第79课-设计评估与优化策略-设计思维基础.md': '第81课-设计评估与优化策略-设计思维基础.md',
    '第80课-设计系统与一致性-设计思维基础.md': '第82课-设计系统与一致性-设计思维基础.md',
    '第81课-设计思维的综合应用-设计思维基础.md': '第83课-设计思维的综合应用-设计思维基础.md',
    '第82课-设计伦理与社会责任-设计思维基础.md': '第84课-设计伦理与社会责任-设计思维基础.md'
};

// 进阶模块也需要调整（+2）
const advancedRenameMap = {
    '第83课-论证的严谨性：有效性、可靠性与说服力-批判性思维进阶.md': '第85课-论证的严谨性：有效性、可靠性与说服力-批判性思维进阶.md',
    '第84课-认知偏差的识别与克服-批判性思维进阶.md': '第86课-认知偏差的识别与克服-批判性思维进阶.md',
    '第85课-元认知与反思性思维-批判性思维进阶.md': '第87课-元认知与反思性思维-批判性思维进阶.md',
    '第86课-多元视角与立场分析-批判性思维进阶.md': '第88课-多元视角与立场分析-批判性思维进阶.md',
    '第87课-证据评估的高级技巧-批判性思维进阶.md': '第89课-证据评估的高级技巧-批判性思维进阶.md',
    '第88课-复杂论证的构建与评估-批判性思维进阶.md': '第90课-复杂论证的构建与评估-批判性思维进阶.md',
    '第89课-批判性阅读与信息素养-批判性思维进阶.md': '第91课-批判性阅读与信息素养-批判性思维进阶.md',
    '第90课-科学思维与假设检验-批判性思维进阶.md': '第92课-科学思维与假设检验-批判性思维进阶.md',
    '第91课-伦理推理与道德判断-批判性思维进阶.md': '第93课-伦理推理与道德判断-批判性思维进阶.md',
    '第92课-批判性思维的综合应用-批判性思维进阶.md': '第94课-批判性思维的综合应用-批判性思维进阶.md',
    '第93课-逻辑符号入门-逻辑思维进阶.md': '第95课-逻辑符号入门-逻辑思维进阶.md',
    '第94课-精确表达技巧-逻辑思维进阶.md': '第96课-精确表达技巧-逻辑思维进阶.md',
    '第95课-推理规则应用-逻辑思维进阶.md': '第97课-推理规则应用-逻辑思维进阶.md',
    '第96课-证据思维-逻辑思维进阶.md': '第98课-证据思维-逻辑思维进阶.md',
    '第97课-科学归纳与假说演绎法-逻辑思维进阶.md': '第99课-科学归纳与假说演绎法-逻辑思维进阶.md',
    '第98课-概率推理与不确定性-逻辑思维进阶.md': '第100课-概率推理与不确定性-逻辑思维进阶.md',
    '第99课-决策理论与博弈论初步-逻辑思维进阶.md': '第101课-决策理论与博弈论初步-逻辑思维进阶.md',
    '第100课-计算思维与算法设计进阶-逻辑思维进阶.md': '第102课-计算思维与算法设计进阶-逻辑思维进阶.md',
    '第101课-逻辑悖论的深入分析与哲学意涵-逻辑思维进阶.md': '第103课-逻辑悖论的深入分析与哲学意涵-逻辑思维进阶.md',
    '第102课-构建与评估复杂论证系统-逻辑思维进阶.md': '第104课-构建与评估复杂论证系统-逻辑思维进阶.md',
    '第103课-系统图解思维-系统思维进阶.md': '第105课-系统图解思维-系统思维进阶.md',
    '第104课-多重反馈回路的交互与主导回路切换-系统思维进阶.md': '第106课-多重反馈回路的交互与主导回路切换-系统思维进阶.md',
    '第105课-系统原型陷阱的深度分析与应对策略-系统思维进阶.md': '第107课-系统原型陷阱的深度分析与应对策略-系统思维进阶.md',
    '第106课-时间尺度与系统行为的节律-系统思维进阶.md': '第108课-时间尺度与系统行为的节律-系统思维进阶.md',
    '第107课-复杂适应系统CAS的特征与自组织-系统思维进阶.md': '第109课-复杂适应系统CAS的特征与自组织-系统思维进阶.md',
    '第108课-网络思维与系统连接性分析-系统思维进阶.md': '第110课-网络思维与系统连接性分析-系统思维进阶.md',
    '第109课-系统韧性适应性与可转化性-系统思维进阶.md': '第111课-系统韧性适应性与可转化性-系统思维进阶.md',
    '第110课-战略性干预与政策杠杆-系统思维进阶.md': '第112课-战略性干预与政策杠杆-系统思维进阶.md',
    '第111课-群体行为模拟-系统思维进阶.md': '第113课-群体行为模拟-系统思维进阶.md',
    '第112课-系统思维在可持续发展与全球挑战中的应用-系统思维进阶.md': '第114课-系统思维在可持续发展与全球挑战中的应用-系统思维进阶.md',
    '第113课-设计思维的高级方法论-设计思维进阶.md': '第115课-设计思维的高级方法论-设计思维进阶.md',
    '第114课-服务设计与体验创新-设计思维进阶.md': '第116课-服务设计与体验创新-设计思维进阶.md',
    '第115课-商业模式创新与价值设计-设计思维进阶.md': '第117课-商业模式创新与价值设计-设计思维进阶.md',
    '第116课-设计策略与品牌体验-设计思维进阶.md': '第118课-设计策略与品牌体验-设计思维进阶.md',
    '第117课-可持续设计与社会创新-设计思维进阶.md': '第119课-可持续设计与社会创新-设计思维进阶.md',
    '第118课-数字化设计与技术融合-设计思维进阶.md': '第120课-数字化设计与技术融合-设计思维进阶.md',
    '第119课-设计领导力与团队管理-设计思维进阶.md': '第121课-设计领导力与团队管理-设计思维进阶.md',
    '第120课-设计研究与洞察发现-设计思维进阶.md': '第122课-设计研究与洞察发现-设计思维进阶.md',
    '第121课-未来设计趋势与新兴技术-设计思维进阶.md': '第123课-未来设计趋势与新兴技术-设计思维进阶.md',
    '第122课-设计思维的综合应用与实践-设计思维进阶.md': '第124课-设计思维的综合应用与实践-设计思维进阶.md'
};

// 一叶知秋模块重新编号（125-132）
const trapRenameMap = {
    '一叶知秋第1课-如何不被错误信息所误导（上）-数字与权威陷阱-优化版.md': '第125课-如何不被错误信息所误导（上）-数字与权威陷阱.md',
    '一叶知秋第2课-如何不被错误信息所误导（中）-逻辑与关联陷阱.md': '第126课-如何不被错误信息所误导（中）-逻辑与关联陷阱.md',
    '一叶知秋第3课-如何不被错误信息所误导（下）-样本与传统陷阱.md': '第127课-如何不被错误信息所误导（下）-样本与传统陷阱.md',
    '一叶知秋第4课-如何避免在压力下做出错误决定（上）-选择与时间陷阱.md': '第128课-如何避免在压力下做出错误决定（上）-选择与时间陷阱.md',
    '一叶知秋第5课-如何避免在压力下做出错误决定（下）-恐惧与后果陷阱.md': '第129课-如何避免在压力下做出错误决定（下）-恐惧与后果陷阱.md',
    '一叶知秋第6课-如何在干扰中保持清晰思考（上）-情感操控陷阱.md': '第130课-如何在干扰中保持清晰思考（上）-情感操控陷阱.md',
    '一叶知秋第7课-如何在干扰中保持清晰思考（下）-信息干扰陷阱.md': '第131课-如何在干扰中保持清晰思考（下）-信息干扰陷阱.md',
    '一叶知秋第8课-如何应对语言攻击和话语陷阱.md': '第132课-如何应对语言攻击和话语陷阱.md'
};

// 识人辨言模块重新编号（133-139）
const personalityRenameMap = {
    '识人辨言先导课-认识大五人格理论.md': '第133课-认识大五人格理论-识人辨言先导课.md',
    '识人辨言第1课-如何识别欺骗型人格的陷阱.md': '第134课-如何识别欺骗型人格的陷阱.md',
    '识人辨言第2课-如何识别操控型人格的陷阱.md': '第135课-如何识别操控型人格的陷阱.md',
    '识人辨言第3课-如何识别自恋型人格的陷阱.md': '第136课-如何识别自恋型人格的陷阱.md',
    '识人辨言第4课-如何识别寄生型人格的陷阱.md': '第137课-如何识别寄生型人格的陷阱.md',
    '识人辨言第5课-如何识别攻击型人格的陷阱.md': '第138课-如何识别攻击型人格的陷阱.md',
    '识人辨言第6课-如何识别伪装型人格的陷阱.md': '第139课-如何识别伪装型人格的陷阱.md',
    '识人辨言第7课-如何识别愚蠢型人格的陷阱.md': '第140课-如何识别愚蠢型人格的陷阱.md'
};

function renameFiles() {
    const baseDir = '03-基础模块';
    const advancedDir = '04-进阶模块';
    const trapDir = '05-一叶知秋模块';
    const personalityDir = '06-识人辨言模块';

    console.log('开始重新编号课程文件...');

    // 处理基础模块
    console.log('\n处理基础模块文件:');
    for (const [oldName, newName] of Object.entries(renameMap)) {
        const oldPath = path.join(baseDir, oldName);
        const newPath = path.join(baseDir, newName);

        if (fs.existsSync(oldPath)) {
            fs.renameSync(oldPath, newPath);
            console.log(`✓ ${oldName} -> ${newName}`);
        } else {
            console.log(`⚠ 文件不存在: ${oldName}`);
        }
    }

    // 处理进阶模块
    console.log('\n处理进阶模块文件:');
    for (const [oldName, newName] of Object.entries(advancedRenameMap)) {
        const oldPath = path.join(advancedDir, oldName);
        const newPath = path.join(advancedDir, newName);

        if (fs.existsSync(oldPath)) {
            fs.renameSync(oldPath, newPath);
            console.log(`✓ ${oldName} -> ${newName}`);
        } else {
            console.log(`⚠ 文件不存在: ${oldName}`);
        }
    }

    // 处理一叶知秋模块
    console.log('\n处理一叶知秋模块文件:');
    for (const [oldName, newName] of Object.entries(trapRenameMap)) {
        const oldPath = path.join(trapDir, oldName);
        const newPath = path.join(trapDir, newName);

        if (fs.existsSync(oldPath)) {
            fs.renameSync(oldPath, newPath);
            console.log(`✓ ${oldName} -> ${newName}`);
        } else {
            console.log(`⚠ 文件不存在: ${oldName}`);
        }
    }

    // 处理识人辨言模块
    console.log('\n处理识人辨言模块文件:');
    for (const [oldName, newName] of Object.entries(personalityRenameMap)) {
        const oldPath = path.join(personalityDir, oldName);
        const newPath = path.join(personalityDir, newName);

        if (fs.existsSync(oldPath)) {
            fs.renameSync(oldPath, newPath);
            console.log(`✓ ${oldName} -> ${newName}`);
        } else {
            console.log(`⚠ 文件不存在: ${oldName}`);
        }
    }

    console.log('\n文件重新编号完成！');
    console.log('现在总共有140课，序号从1到140连续。');
}

// 执行重新编号
renameFiles();
