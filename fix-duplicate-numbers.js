const fs = require('fs');
const path = require('path');

// 修正重复的103和104课程编号
const fixDuplicates = {
    // 重复的103课
    '第103课-逻辑悖论的深入分析与哲学意涵-逻辑思维进阶.md': '第105课-逻辑悖论的深入分析与哲学意涵-逻辑思维进阶.md',
    
    // 重复的104课
    '第104课-构建与评估复杂论证系统-逻辑思维进阶.md': '第106课-构建与评估复杂论证系统-逻辑思维进阶.md',
    
    // 后续文件需要相应调整（+2）
    '第105课-系统原型陷阱的深度分析与应对策略-系统思维进阶.md': '第107课-系统原型陷阱的深度分析与应对策略-系统思维进阶.md',
    '第106课-时间尺度与系统行为的节律-系统思维进阶.md': '第108课-时间尺度与系统行为的节律-系统思维进阶.md',
    '第107课-复杂适应系统CAS的特征与自组织-系统思维进阶.md': '第109课-复杂适应系统CAS的特征与自组织-系统思维进阶.md',
    '第108课-网络思维与系统连接性分析-系统思维进阶.md': '第110课-网络思维与系统连接性分析-系统思维进阶.md',
    '第109课-系统韧性适应性与可转化性-系统思维进阶.md': '第111课-系统韧性适应性与可转化性-系统思维进阶.md',
    '第110课-战略性干预与政策杠杆-系统思维进阶.md': '第112课-战略性干预与政策杠杆-系统思维进阶.md',
    '第111课-群体行为模拟-系统思维进阶.md': '第113课-群体行为模拟-系统思维进阶.md',
    '第112课-系统思维在可持续发展与全球挑战中的应用-系统思维进阶.md': '第114课-系统思维在可持续发展与全球挑战中的应用-系统思维进阶.md',
    '第113课-设计思维的高级方法论-设计思维进阶.md': '第115课-设计思维的高级方法论-设计思维进阶.md',
    '第114课-服务设计与体验创新-设计思维进阶.md': '第116课-服务设计与体验创新-设计思维进阶.md',
    '第115课-商业模式创新与价值设计-设计思维进阶.md': '第117课-商业模式创新与价值设计-设计思维进阶.md',
    '第116课-设计策略与品牌体验-设计思维进阶.md': '第118课-设计策略与品牌体验-设计思维进阶.md',
    '第117课-可持续设计与社会创新-设计思维进阶.md': '第119课-可持续设计与社会创新-设计思维进阶.md',
    '第118课-数字化设计与技术融合-设计思维进阶.md': '第120课-数字化设计与技术融合-设计思维进阶.md',
    '第119课-设计领导力与团队管理-设计思维进阶.md': '第121课-设计领导力与团队管理-设计思维进阶.md',
    '第120课-设计研究与洞察发现-设计思维进阶.md': '第122课-设计研究与洞察发现-设计思维进阶.md',
    '第121课-未来设计趋势与新兴技术-设计思维进阶.md': '第123课-未来设计趋势与新兴技术-设计思维进阶.md',
    '第122课-设计思维的综合应用与实践-设计思维进阶.md': '第124课-设计思维的综合应用与实践-设计思维进阶.md'
};

// 一叶知秋模块重新编号（125-132）
const trapRenameMap = {
    '一叶知秋第1课-如何不被错误信息所误导（上）-数字与权威陷阱-优化版.md': '第125课-如何不被错误信息所误导（上）-数字与权威陷阱.md',
    '一叶知秋第2课-如何不被错误信息所误导（中）-逻辑与关联陷阱.md': '第126课-如何不被错误信息所误导（中）-逻辑与关联陷阱.md',
    '一叶知秋第3课-如何不被错误信息所误导（下）-样本与传统陷阱.md': '第127课-如何不被错误信息所误导（下）-样本与传统陷阱.md',
    '一叶知秋第4课-如何避免在压力下做出错误决定（上）-选择与时间陷阱.md': '第128课-如何避免在压力下做出错误决定（上）-选择与时间陷阱.md',
    '一叶知秋第5课-如何避免在压力下做出错误决定（下）-恐惧与后果陷阱.md': '第129课-如何避免在压力下做出错误决定（下）-恐惧与后果陷阱.md',
    '一叶知秋第6课-如何在干扰中保持清晰思考（上）-情感操控陷阱.md': '第130课-如何在干扰中保持清晰思考（上）-情感操控陷阱.md',
    '一叶知秋第7课-如何在干扰中保持清晰思考（下）-信息干扰陷阱.md': '第131课-如何在干扰中保持清晰思考（下）-信息干扰陷阱.md',
    '一叶知秋第8课-如何应对语言攻击和话语陷阱.md': '第132课-如何应对语言攻击和话语陷阱.md'
};

// 识人辨言模块重新编号（133-139）
const personalityRenameMap = {
    '识人辨言先导课-认识大五人格理论.md': '第133课-认识大五人格理论-识人辨言先导课.md',
    '识人辨言第1课-如何识别欺骗型人格的陷阱.md': '第134课-如何识别欺骗型人格的陷阱.md',
    '识人辨言第2课-如何识别操控型人格的陷阱.md': '第135课-如何识别操控型人格的陷阱.md',
    '识人辨言第3课-如何识别自恋型人格的陷阱.md': '第136课-如何识别自恋型人格的陷阱.md',
    '识人辨言第4课-如何识别寄生型人格的陷阱.md': '第137课-如何识别寄生型人格的陷阱.md',
    '识人辨言第5课-如何识别攻击型人格的陷阱.md': '第138课-如何识别攻击型人格的陷阱.md',
    '识人辨言第6课-如何识别伪装型人格的陷阱.md': '第139课-如何识别伪装型人格的陷阱.md',
    '识人辨言第7课-如何识别愚蠢型人格的陷阱.md': '第140课-如何识别愚蠢型人格的陷阱.md'
};

function fixDuplicateNumbers() {
    const advancedDir = '04-进阶模块';
    const trapDir = '05-一叶知秋模块';
    const personalityDir = '06-识人辨言模块';
    
    console.log('开始修正重复的课程编号...');
    
    // 修正进阶模块的重复编号
    console.log('\n修正进阶模块重复编号:');
    for (const [oldName, newName] of Object.entries(fixDuplicates)) {
        const oldPath = path.join(advancedDir, oldName);
        const newPath = path.join(advancedDir, newName);
        
        if (fs.existsSync(oldPath)) {
            fs.renameSync(oldPath, newPath);
            console.log(`✓ ${oldName} -> ${newName}`);
        } else {
            console.log(`⚠ 文件不存在: ${oldName}`);
        }
    }
    
    // 处理一叶知秋模块
    console.log('\n处理一叶知秋模块文件:');
    for (const [oldName, newName] of Object.entries(trapRenameMap)) {
        const oldPath = path.join(trapDir, oldName);
        const newPath = path.join(trapDir, newName);
        
        if (fs.existsSync(oldPath)) {
            fs.renameSync(oldPath, newPath);
            console.log(`✓ ${oldName} -> ${newName}`);
        } else {
            console.log(`⚠ 文件不存在: ${oldName}`);
        }
    }
    
    // 处理识人辨言模块
    console.log('\n处理识人辨言模块文件:');
    for (const [oldName, newName] of Object.entries(personalityRenameMap)) {
        const oldPath = path.join(personalityDir, oldName);
        const newPath = path.join(personalityDir, newName);
        
        if (fs.existsSync(oldPath)) {
            fs.renameSync(oldPath, newPath);
            console.log(`✓ ${oldName} -> ${newName}`);
        } else {
            console.log(`⚠ 文件不存在: ${oldName}`);
        }
    }
    
    console.log('\n文件重新编号完成！');
    console.log('现在总共有140课，序号从1到140连续，无重复。');
}

// 执行修正
fixDuplicateNumbers();
